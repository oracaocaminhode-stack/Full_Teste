<!--
 * @file dashboard.html
 * @description Painel do usu√°rio, acess√≠vel ap√≥s o login. Exibe informa√ß√µes do usu√°rio e permite o logout.
 * 
 * @author Manus AI
 * @date Oct 01, 2025
 -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sistema Full-Stack</title>
    
    <!-- CSS Principal e do Dashboard: Estilos globais e espec√≠ficos para o dashboard. -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    
    <!-- Favicon: √çcone exibido na aba do navegador. -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    
    <!-- Stripe.js para pagamentos: Biblioteca oficial do Stripe para integra√ß√£o frontend. -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Meta tags para SEO e descri√ß√£o da p√°gina. -->
    <meta name="description" content="Dashboard do sistema full-stack com funcionalidades completas">
    <meta name="keywords" content="dashboard, sistema, fullstack, pagamentos, email">
    <meta name="author" content="Desenvolvedor Full-Stack">
</head>
<body>
    <!-- Container principal da p√°gina: Envolve todo o conte√∫do do dashboard. -->
    <div class="dashboard-container">
        <!-- Sidebar de navega√ß√£o: Menu lateral para navegar entre as se√ß√µes do dashboard. -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>üöÄ Dashboard</h2>
                <!-- Bot√£o para alternar a visibilidade da sidebar em telas menores. -->
                <button id="sidebar-toggle" class="sidebar-toggle">
                    ‚ò∞
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <!-- Item de navega√ß√£o: Vis√£o Geral. -->
                    <li class="nav-item">
                        <a href="#overview" class="nav-link active" data-section="overview">
                            <span class="nav-icon">üìä</span>
                            <span class="nav-text">Vis√£o Geral</span>
                        </a>
                    </li>
                    <!-- Item de navega√ß√£o: Perfil do Usu√°rio. -->
                    <li class="nav-item">
                        <a href="#profile" class="nav-link" data-section="profile">
                            <span class="nav-icon">üë§</span>
                            <span class="nav-text">Perfil</span>
                        </a>
                    </li>
                    <!-- Item de navega√ß√£o: Enviar Email. -->
                    <li class="nav-item">
                        <a href="#email" class="nav-link" data-section="email">
                            <span class="nav-icon">üìß</span>
                            <span class="nav-text">Enviar Email</span>
                        </a>
                    </li>
                    <!-- Item de navega√ß√£o: Pagamentos. -->
                    <li class="nav-item">
                        <a href="#payment" class="nav-link" data-section="payment">
                            <span class="nav-icon">üí≥</span>
                            <span class="nav-text">Pagamentos</span>
                        </a>
                    </li>
                    <!-- Item de navega√ß√£o: Contato. -->
                    <li class="nav-item">
                        <a href="#contact" class="nav-link" data-section="contact">
                            <span class="nav-icon">üìû</span>
                            <span class="nav-text">Contato</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <!-- Rodap√© da sidebar com bot√£o de logout. -->
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn btn-outline btn-small">
                    üö™ Sair
                </button>
            </div>
        </aside>

        <!-- Conte√∫do principal do dashboard: Exibe as diferentes se√ß√µes. -->
        <main class="main-dashboard">
            <!-- Cabe√ßalho do dashboard: T√≠tulo da p√°gina e informa√ß√µes do usu√°rio logado. -->
            <header class="dashboard-header">
                <div class="header-content">
                    <h1 id="page-title">Vis√£o Geral</h1>
                    <div class="user-info">
                        <img id="user-avatar" src="" alt="Avatar" class="user-avatar">
                        <div class="user-details">
                            <span id="user-name" class="user-name">Carregando...</span>
                            <span id="user-email" class="user-email">Carregando...</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- √Årea de mensagens globais: Exibe mensagens de sucesso ou erro para o usu√°rio. -->
            <div id="global-message-area" class="message-area hidden">
                <div id="global-message-content" class="message-content"></div>
            </div>

            <!-- Se√ß√£o: Vis√£o Geral - Conte√∫do inicial do dashboard. -->
            <section id="overview-section" class="dashboard-section active">
                <div class="section-content">
                    <h2>üéØ Bem-vindo ao Sistema Full-Stack!</h2>
                    <p>Este √© um projeto did√°tico completo que demonstra como integrar frontend e backend.</p>
                    
                    <!-- Cards de estat√≠sticas: Exibem o status das principais funcionalidades. -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üîê</div>
                            <div class="stat-content">
                                <h3>Autentica√ß√£o</h3>
                                <p>JWT + Google OAuth</p>
                                <span class="stat-status success">‚úÖ Ativo</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üìß</div>
                            <div class="stat-content">
                                <h3>Sistema de Email</h3>
                                <p>Nodemailer + Gmail</p>
                                <span class="stat-status" id="email-status">‚è≥ Verificando...</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üí≥</div>
                            <div class="stat-content">
                                <h3>Pagamentos</h3>
                                <p>Stripe Integration</p>
                                <span class="stat-status" id="payment-status">‚è≥ Verificando...</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üõ°Ô∏è</div>
                            <div class="stat-content">
                                <h3>Seguran√ßa</h3>
                                <p>Bcrypt + Rate Limiting</p>
                                <span class="stat-status success">‚úÖ Ativo</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Funcionalidades dispon√≠veis: Links para as diferentes se√ß√µes do dashboard. -->
                    <div class="features-overview">
                        <h3>üöÄ Funcionalidades Dispon√≠veis</h3>
                        <div class="features-list">
                            <div class="feature-card" onclick="showSection(\'profile\')">
                                <h4>üë§ Gerenciar Perfil</h4>
                                <p>Visualize e edite suas informa√ß√µes pessoais</p>
                            </div>
                            <div class="feature-card" onclick="showSection(\'email\')">
                                <h4>üìß Enviar Emails</h4>
                                <p>Teste o sistema de envio de emails</p>
                            </div>
                            <div class="feature-card" onclick="showSection(\'payment\')">
                                <h4>üí≥ Processar Pagamentos</h4>
                                <p>Teste a integra√ß√£o com Stripe</p>
                            </div>
                            <div class="feature-card" onclick="showSection(\'contact\')">
                                <h4>üìû Formul√°rio de Contato</h4>
                                <p>Envie mensagens atrav√©s do sistema</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o: Perfil - Exibe e permite gerenciar as informa√ß√µes do usu√°rio. -->
            <section id="profile-section" class="dashboard-section">
                <div class="section-content">
                    <h2>üë§ Meu Perfil</h2>
                    
                    <div class="profile-container">
                        <!-- Informa√ß√µes b√°sicas do perfil do usu√°rio. -->
                        <div class="profile-info">
                            <div class="profile-avatar-section">
                                <img id="profile-avatar" src="" alt="Avatar" class="profile-avatar">
                                <div class="avatar-info">
                                    <h3 id="profile-name">Carregando...</h3>
                                    <p id="profile-email">Carregando...</p>
                                    <span id="profile-provider" class="auth-provider">Carregando...</span>
                                </div>
                            </div>
                            
                            <!-- Detalhes adicionais do perfil. -->
                            <div class="profile-details">
                                <div class="detail-item">
                                    <strong>ID do Usu√°rio:</strong>
                                    <span id="profile-id">Carregando...</span>
                                </div>
                                <div class="detail-item">
                                    <strong>Data de Cadastro:</strong>
                                    <span id="profile-created">Carregando...</span>
                                </div>
                                <div class="detail-item">
                                    <strong>√öltima Atualiza√ß√£o:</strong>
                                    <span id="profile-updated">Carregando...</span>
                                </div>
                                <div class="detail-item">
                                    <strong>Email Verificado:</strong>
                                    <span id="profile-verified">Carregando...</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- A√ß√µes que o usu√°rio pode realizar no perfil. -->
                        <div class="profile-actions">
                            <h4>‚öôÔ∏è A√ß√µes</h4>
                            <button class="btn btn-primary" onclick="refreshProfile()">
                                üîÑ Atualizar Dados
                            </button>
                            <button class="btn btn-outline" onclick="downloadProfileData()">
                                üì• Baixar Dados
                            </button>
                            <button class="btn btn-danger" onclick="confirmDeleteAccount()">
                                üóëÔ∏è Excluir Conta
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o: Enviar Email - Formul√°rio para testar o envio de e-mails. -->
            <section id="email-section" class="dashboard-section">
                <div class="section-content">
                    <h2>üìß Enviar Email</h2>
                    <p>Teste o sistema de envio de emails integrado com Gmail.</p>
                    
                    <form id="email-form" class="dashboard-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email-to" class="form-label">Para (Email de Destino)</label>
                                <input 
                                    type="email" 
                                    id="email-to" 
                                    name="to" 
                                    class="form-input"
                                    placeholder="Deixe vazio para usar o padr√£o (lersc2405@gmail.com)"
                                >
                                <div class="field-help">
                                    Se n√£o preenchido, ser√° enviado para o email configurado no servidor
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email-subject" class="form-label">Assunto</label>
                            <input 
                                type="text" 
                                id="email-subject" 
                                name="subject" 
                                class="form-input"
                                placeholder="Assunto do email"
                                required
                                maxlength="200"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="email-message" class="form-label">Mensagem</label>
                            <textarea 
                                id="email-message" 
                                name="message" 
                                class="form-textarea"
                                placeholder="Digite sua mensagem aqui..."
                                required
                                rows="6"
                                maxlength="5000"
                            ></textarea>
                            <div class="field-help">
                                <span id="message-counter">0</span>/5000 caracteres
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" id="send-email-btn" class="btn btn-primary">
                                <span class="btn-text">üì§ Enviar Email</span>
                                <span class="btn-loading hidden">
                                    <span class="spinner"></span>
                                    Enviando...
                                </span>
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="clearEmailForm()">
                                üóëÔ∏è Limpar
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Se√ß√£o: Pagamentos - Interface para testar a integra√ß√£o com Stripe. -->
            <section id="payment-section" class="dashboard-section">
                <div class="section-content">
                    <h2>üí≥ Processar Pagamento</h2>
                    <p>Teste a integra√ß√£o com Stripe para processamento de pagamentos.</p>
                    
                    <!-- Sele√ß√£o de produto: Permite escolher um item para simular a compra. -->
                    <div class="payment-products">
                        <h3>Selecione um produto para teste:</h3>
                        <div class="products-grid">
                            <div class="product-card" data-product-id="premium-plan" data-product-name="Plano Premium" data-product-price="1000">
                                <h4>üíé Plano Premium</h4>
                                <p class="product-price">R$ 10,00</p>
                                <p>Acesso completo a todos os recursos por um m√™s.</p>
                                <button class="btn btn-primary select-product-btn">Selecionar</button>
                            </div>
                            <div class="product-card" data-product-id="extra-credits" data-product-name="Cr√©ditos Adicionais" data-product-price="500">
                                <h4>‚ú® Cr√©ditos Adicionais</h4>
                                <p class="product-price">R$ 5,00</p>
                                <p>Pacote de cr√©ditos para funcionalidades extras.</p>
                                <button class="btn btn-primary select-product-btn">Selecionar</button>
                            </div>
                        </div>
                    </div>

                    <!-- Formul√°rio de pagamento Stripe: Exibido ap√≥s a sele√ß√£o de um produto. -->
                    <div id="payment-form-container" class="payment-form-container hidden">
                        <h3>Resumo do Pedido:</h3>
                        <p>Produto: <span id="selected-product-name"></span></p>
                        <p>Valor: <span id="selected-product-price"></span></p>
                        
                        <form id="payment-form" class="dashboard-form">
                            <div class="form-group">
                                <label for="card-element" class="form-label">Detalhes do Cart√£o</label>
                                <!-- Elemento onde o Stripe.js montar√° o campo do cart√£o. -->
                                <div id="card-element" class="form-input stripe-card-element"></div>
                                <!-- Exibe erros de valida√ß√£o do cart√£o. -->
                                <div id="card-errors" class="field-error" role="alert"></div>
                            </div>
                            
                            <button type="submit" id="pay-btn" class="btn btn-primary">
                                <span class="btn-text">Pagar</span>
                                <span class="btn-loading hidden">
                                    <span class="spinner"></span>
                                    Processando...
                                </span>
                            </button>
                        </form>
                    </div>

                    <!-- Hist√≥rico de pagamentos: Exibe uma lista dos pagamentos realizados pelo usu√°rio. -->
                    <div class="payment-history">
                        <h3>Hist√≥rico de Pagamentos</h3>
                        <div class="payment-status-info">
                            Status: <span id="payment-status">Carregando...</span>
                        </div>
                        <ul id="payments-list" class="payments-list">
                            <!-- Pagamentos ser√£o carregados aqui via JavaScript -->
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o: Contato - Formul√°rio para enviar mensagens de contato. -->
            <section id="contact-section" class="dashboard-section">
                <div class="section-content">
                    <h2>üìû Contato</h2>
                    <p>Envie uma mensagem para nossa equipe.</p>
                    
                    <form id="contact-form" class="dashboard-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contact-name" class="form-label">Seu Nome</label>
                                <input 
                                    type="text" 
                                    id="contact-name" 
                                    name="name" 
                                    class="form-input"
                                    placeholder="Seu nome completo"
                                    required
                                >
                            </div>
                            <div class="form-group">
                                <label for="contact-email" class="form-label">Seu Email</label>
                                <input 
                                    type="email" 
                                    id="contact-email" 
                                    name="email" 
                                    class="form-input"
                                    placeholder="seu@email.com"
                                    required
                                >
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-phone" class="form-label">Telefone (Opcional)</label>
                            <input 
                                type="tel" 
                                id="contact-phone" 
                                name="phone" 
                                class="form-input"
                                placeholder="(XX) XXXXX-XXXX"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-subject" class="form-label">Assunto</label>
                            <input 
                                type="text" 
                                id="contact-subject" 
                                name="subject" 
                                class="form-input"
                                placeholder="Assunto da mensagem"
                                required
                                maxlength="100"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-message" class="form-label">Mensagem</label>
                            <textarea 
                                id="contact-message" 
                                name="message" 
                                class="form-textarea"
                                placeholder="Digite sua mensagem aqui..."
                                required
                                rows="8"
                                maxlength="2000"
                            ></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" id="send-contact-btn" class="btn btn-primary">
                                <span class="btn-text">‚úâÔ∏è Enviar Mensagem</span>
                                <span class="btn-loading hidden">
                                    <span class="spinner"></span>
                                    Enviando...
                                </span>
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="clearContactForm()">
                                üóëÔ∏è Limpar
                            </button>
                        </div>
                    </form>
                </div>
            </section>
        </main>

        <!-- Modal de Confirma√ß√£o de Exclus√£o de Conta: Exibido ao tentar excluir a conta. -->
        <div id="delete-account-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Confirmar Exclus√£o de Conta</h3>
                    <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Tem certeza que deseja excluir sua conta? Esta a√ß√£o √© irrevers√≠vel.</p>
                    <p>Todos os seus dados ser√£o permanentemente removidos.</p>
                </div>
                <div class="modal-footer">
                    <button id="cancel-delete-btn" class="btn btn-secondary" onclick="closeDeleteModal()">
                        Cancelar
                    </button>
                    <button id="confirm-delete-btn" class="btn btn-danger">
                        Sim, Excluir Minha Conta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts JavaScript: Carregados no final do body para otimizar o carregamento da p√°gina. -->
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
